<ion-content #mycontent class="instrument-panel-content">


    <div class="chart-page-container" id="instrument-panel-container">
        <!-- 第一行 -->
        <ion-row class="top-bar-container">
            <ion-col class="move-left" center text-center>
                <button clear ion-button menuToggle class="open-menu-button">
                    <img class="custom-image-button" src="assets/img/menu.svg" />
                </button>
            </ion-col>


            <ion-col width-30 text-center center>

                <div  class="page-title">
                    <strong>远程操作实验平台</strong>
                </div>
            </ion-col>
            <!-- 最上边 右边的两个按钮 single run -->
            <ion-col class="inner-ctrls" text-center center [ngClass]="{'move-feature-to-front': tutorialMode && tutorialStage === 3}">
                <button *ngIf="(!readingLa && !readingOsc) || running" ion-button icon-right class="text-button-side disable-hover main-button" (tap)="singleClick()"
                        [tooltip]="tooltipService.getTooltip('tutorialSingleButton').message" [tooltipAnimation]="true" tooltipPlacement="bottom"
                        [forceShow]="tutorialStage === 3 && tutorialMode" onlyForceShow="true">
                    <span class="collapse-button">Single</span>
                    <img class="custom-image-button" src="assets/img/single.svg" />
                </button>
                <button *ngIf="(readingLa || readingOsc) && !running" ion-button icon-right class="text-button-side disable-hover main-button" (tap)="abortSingle()">
                    <span class="collapse-button">Abort</span>
                    <img class="custom-image-button" src="assets/img/stop.svg" />
                </button>
                <button ion-button icon-right class="text-button-side disable-hover main-button" (tap)="runClick()" *ngIf="!running">
                    <span class="collapse-button">Run</span>
                    <img class="custom-image-button" src="assets/img/run.svg" />
                </button>
                <button ion-button icon-right class="text-button-side disable-hover main-button" (tap)="stopClick()" *ngIf="running">
                    <span class="collapse-button">Stop</span>
                    <img class="custom-image-button" src="assets/img/stop.svg" />
                </button>
                <div class="trigger-indicator">
                    {{triggerStatus}}
                </div>
            </ion-col>
        </ion-row>

        <ion-grid>
            <ion-row class="center-container">

                <!-- <div class="end-tutorial-display" [ngClass]="{'move-feature-to-front': tutorialMode && tutorialStage === 4}" *ngIf="tutorialMode && tutorialStage === 4">
                    <div text-center>
                        For More Info, Go To The
                        <a href="https://reference.digilentinc.com/reference/software/waveforms-live/start" target="_blank">WaveForms Live Reference Page</a>
                    </div>
                    <div text-center>
                        For Feedback And Support, Go To The
                        <a href="https://forum.digilentinc.com/forum/30-waveforms-live-and-openscope-feedback/" target="_blank">Digilent Forums</a>
                    </div>
                    <br>
                    <div text-center>
                        <button ion-button class="text-button-side disable-hover" (tap)="tutorialFinished()">ok</button>
                    </div>
                </div> -->


                <!-- 示波器显示黑底大图 -->
                <ion-col >
                    <!-- <div>我好</div> -->
                    <silverNeedleChart #chart1 (chartLoad)="initSettings()" (resetDevice)="resetDevice()" class="chart-wrapper"></silverNeedleChart>
                    <!-- <ion-fab class="tutorial-mode-button" *ngIf="tutorialMode">
                        <button ion-fab mini class="help-button" (tap)="executeHelp()" [ngClass]="{'end-tutorial': tutorialMode, 'help-button': !tutorialMode}">
                            <img [src]="tutorialMode ? 'assets/img/close.svg' : 'assets/img/help.svg'" />
                        </button>
                    </ion-fab> -->
                    <!-- <div class="chart-tutorial-tooltip" [ngClass]="{'move-feature-to-front': tutorialMode && tutorialStage === 2}" *ngIf="tutorialMode && tutorialStage === 2">
                        <div>
                            {{tooltipService.getTooltip('tutorialChart').message}}
                        </div>
                        <br>
                        <div text-center>
                            <button ion-button class="text-button-side disable-hover" (tap)="startFgenTutorial()">ok</button>
                        </div>
                    </div> -->



                    <!-- <ion-list>

                        <ion-item>
                        <ion-label fixed>实验结果</ion-label>
                        <ion-input type="text" value=""></ion-input>
                        </ion-item>

                        <ion-item>
                        <ion-label fixed>实验心得</ion-label>
                        <ion-input type="password"></ion-input>
                        </ion-item>

                    </ion-list> -->
                </ion-col>

                <!-- 右半部分的各种组件 -->
                <ion-col class="controls-wrapper">
                    <xaxis-controls [chart]="chart1"></xaxis-controls>

                    <trigger #triggerComponent [chart]="chart1" (triggerTutotrialFinish)="triggerTutorialFinished($event)" [running]="running"></trigger>

                    <yaxis-controls #yaxisComponent [chart]="chart1" [running]="running"></yaxis-controls>

                    <fgen #fgenComponent (fgenTutorialFinish)="fgenTutorialFinished($event)"></fgen>

                    <digital-io #gpioComponent [chart]="chart1" class="to-hidden"></digital-io>

                    <dc-supply #dcComponent class="to-hidden"></dc-supply>
                    <div class="timeline-chart-wrapper to-hidden"  onlyForceShow="true">
                        <timeline-chart> </timeline-chart>
                    </div>
                </ion-col>

            </ion-row>
        </ion-grid>

    </div>
</ion-content>
